<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DOM练习-3-添加删除记录-删除</title>
    <script type="text/javascript">

        /**
         * 
         *   删除tr的响应函数
         * 
        */
        function delA() {

            // 点击超链接以后, 需要删除超链接所在的那行
            // 这里我们点击哪个超链接, this就是谁
            // 获取当前tr
            var tr = this.parentNode.parentNode;


            // 获取想要删除的员工名字
            // var name = tr.getElementsByTagName("td")[0].innerHTML;
            var name = tr.children[0].innerHTML;

            // 删除之前, 弹出提示边框
            /**
             *  confirm()用于弹出一个带有确认和取消按钮的提示框
             *      需要一个字符串作为参数, 该字符串将会作为提示文字显示出来
             * 
             *  如果用户点击确认则返回true, 如果点击取消则返回false
             * 
            */
            var flag = confirm("确认删除" + name + "吗?");

            // 如果用户点击确认
            if (flag) {
                // 删除tr
                tr.parentNode.removeChild(tr);
            }


            /**
             *  点击超链接以后, 超链接会跳转页面, 这个是超链接的默认行为
             *  但是此时我们不希望出现默认行为, 可以通过在响应函数的最后return false来取消默认行为
             * 
            */

            // return false;

        };


        window.onload = function () {
            /**
             *  
             *  点击超链接以后, 删除一个员工的信息
             * 
            */
            // 获取所有超链接
            var allA = document.getElementsByTagName("a");

            // 为每个超链接都绑定一个单击响应函数
            for (let i = 0; i < allA.length; i++) {
                /**
                 *  
                 *  for循环会在页面加载完成之后立即执行
                 *      而响应函数会在超链接点击时才执行
                 * 
                 *  当响应函数执行时, for循环
                 * 
                */
                allA[i].onclick = delA;

            }



            /**
             *  
             *  点击Submit以后, 添加一个员工的信息到表格中
             *      
            */
            var submitBtn = document.getElementById("submit");
            
            submitBtn.onclick = function () {

                // 获取用户添加的员工信息
                // 获取员工的名字
                var name = document.getElementById("name").value;


                // 获取员工的年龄
                var age = document.getElementById("age").value;


                // 获取员工的薪水
                var salary = document.getElementById("salary").value;


                /**
                 * 
                 *  需要将获取到的信息保存到tr中
                 * 
                */
                // 创建一个tr
                var tr = document.createElement("tr");

                // 设置tr中的内容
                tr.innerHTML =
                    "<td>" + name + "</td>" +
                    "<td>" + age + "</td>" +
                    "<td>" + salary + "</td>" +
                    "<td><a href='javascript:;''>delete</a></td>";


                // 获取刚刚添加的a元素, 并为其绑定单击响应函数
                var a = tr.getElementsByTagName("a")[0];

                a.onclick = delA;

                console.log(tr);

                // // 创建四个td
                // var nameTd = document.createElement("td");
                // var ageTd = document.createElement("td");
                // var salaryTd = document.createElement("td");
                // var deleteTd = document.createElement("td");

                // // 创建一个a元素
                // var a = document.createElement("a");

                // // 向a中添加href属性
                // a.href = "javascript:;";

                // // 为新添加的a再绑定一次单击响应函数
                // a.onclick = delA;

                // // 创建文本节点
                // var nameText = document.createTextNode(name);
                // var ageText = document.createTextNode(age);
                // var salaryText = document.createTextNode(salary);
                // var delText = document.createTextNode("delete");


                // // 将文本添加到td中
                // nameTd.appendChild(nameText);
                // ageTd.appendChild(ageText);
                // salaryTd.appendChild(salaryText);

                // // 向a中添加文本
                // a.appendChild(delText);

                // // 将a添加到td中
                // deleteTd.appendChild(a);

                // // 将td添加到tr中
                // tr.appendChild(nameTd);
                // tr.appendChild(ageTd);
                // tr.appendChild(salaryTd);
                // tr.appendChild(deleteTd);


                // 获取table
                var table = document.getElementById("list");

                // 获取table 中的tbody
                var tbody = table.getElementsByTagName("tbody")[0];


                // 将tr添加到table中
                tbody.appendChild(tr);
            };

        }

    </script>
</head>

<body>
    <table id="list">
        <tr class="test">
            <th>姓名</th>
            <th>年龄</th>
            <th>薪水</th>
            <th></th>
        </tr>
        <tr class="test">
            <td>tom</td>
            <td>18</td>
            <td>1000</td>
            <td><a href="javascript:;">delete</a></td>
        </tr>
        <tr class="test">
            <td>jerry</td>
            <td>20</td>
            <td>8000</td>
            <td><a href="javascript:;">delete</a></td>
        </tr>
        <tr>
            <td>mack</td>
            <td>25</td>
            <td>10000</td>
            <td><a href="javascript:;">delete</a></td>
        </tr>
    </table>
    <br>
    <br>
    <br>
    <table id="operator">
        <tr>
            <th>添加新员工</th>
        </tr>
        <tr>
            <td>
                name: <input type="text" name="name" id="name" />
            </td>
        </tr>
        <tr>
            <td>
                age: <input type="text" name="age" id="age" />
            </td>
        </tr>
        <tr>
            <td>
                salary: <input type="text" name="salary" id="salary" />
            </td>
        </tr>
        <tr>
            <td>
                <button id="submit">提交</button>
            </td>
        </tr>
    </table>
</body>

</html>